# üîç –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–£–î–ò–¢ –ö–û–î–û–í–û–ô –ë–ê–ó–´

**–î–∞—Ç–∞:** 17 –¥–µ–∫–∞–±—Ä—è 2025, 22:05 MSK  
**–ü—Ä–æ–µ–∫—Ç:** VPN Connect - Smart Config Generator v2.1.1  
**–ê—É–¥–∏—Ç–æ—Ä:** NeuroExpert Architect

---

## üìä –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è            | –û—Ü–µ–Ω–∫–∞  | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                |
| -------------------- | ------- | ------------------------------------------ |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**      | üü¢ 8/10 | –•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π serverless –ø—Ä–æ–µ–∫—Ç |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**     | üü° 7/10 | –ï—Å—Ç—å –º–æ–º–µ–Ω—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è                 |
| **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**    | üü¢ 8/10 | TypeScript strict mode, —Ö–æ—Ä–æ—à–∏–µ —Ç–∏–ø—ã       |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**     | üü¢ 9/10 | –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                  |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**    | üî¥ 4/10 | –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤                  |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | üü° 6/10 | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è in-memory storage              |

**–û–±—â–∏–π –±–∞–ª–ª: 7.0/10** ‚≠ê

---

## ‚úÖ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ú–û–ú–ï–ù–¢–´

### 1. üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- ‚úÖ –ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞: `api/`, `utils/`, `public/`, `scripts/`
- ‚úÖ Serverless-first –ø–æ–¥—Ö–æ–¥ (Vercel Functions)
- ‚úÖ Stateless JWT —Ç–æ–∫–µ–Ω—ã ‚Äî –Ω–µ –Ω—É–∂–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (separation of concerns)
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É—Ç–∏–ª–∏—Ç

### 2. üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—Ö–æ—Ä–æ—à–æ —Å–¥–µ–ª–∞–Ω–æ)

- ‚úÖ JWT –ø–æ–¥–ø–∏—Å–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π expiration
- ‚úÖ Rate limiting –Ω–∞ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`env-validator.ts`)
- ‚úÖ Telegram ID –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è trial –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ

### 3. üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ –û–±—à–∏—Ä–Ω—ã–π README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- ‚úÖ –ü–æ–ª–Ω—ã–π .env.example —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- ‚úÖ Checklists –¥–ª—è –¥–µ–ø–ª–æ—è (DEPLOYMENT.md, PRODUCTION-CHECKLIST.md)
- ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (SPEC.md, ARCHITECTURE.md)
- ‚úÖ –ü—Ä–∞–≤–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (offer.html, privacy.html)

### 4. üíª –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- ‚úÖ TypeScript strict mode –≤–∫–ª—é—á—ë–Ω
- ‚úÖ –•–æ—Ä–æ—à–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π

### 5. üé® Frontend

- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ –í–∞–ª–∏–¥–Ω–∞—è HTML5 —Å–µ–º–∞–Ω—Ç–∏–∫–∞
- ‚úÖ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (P0)

#### 1. In-Memory Storage –Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–µ–Ω

**–§–∞–π–ª:** `api/payment/webhook.ts`, `utils/rate-limit.ts`

```typescript
// –ü–†–û–ë–õ–ï–ú–ê: Payment records —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
declare global {
  var confirmedPayments: Map<string, PaymentRecord>;
}
```

**–†–∏—Å–∫:** –ü—Ä–∏ —Ö–æ–ª–æ–¥–Ω–æ–º —Å—Ç–∞—Ä—Ç–µ Vercel Function –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è!

**–†–µ—à–µ–Ω–∏–µ:**

```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vercel KV (—É–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –≤ utils/storage.ts)
import { PaymentStorage } from "../../utils/storage";
await PaymentStorage.save(record);
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô ‚Äî –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Vercel KV

---

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è webhook –æ—Ç YooKassa

**–§–∞–π–ª:** `api/payment/webhook.ts`

```typescript
// –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ webhook
const notification = req.body; // ‚Üê –ö—Ç–æ —É–≥–æ–¥–Ω–æ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–µ–π–∫–æ–≤—ã–π webhook!
```

**–†–µ—à–µ–Ω–∏–µ:**

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É IP YooKassa –∏–ª–∏ HMAC –ø–æ–¥–ø–∏—Å–∏
const YOOKASSA_IPS = ["185.71.76.0/27", "185.71.77.0/27", "77.75.153.0/25"];

function isYooKassaIP(ip: string): boolean {
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ IP –≤ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
}

if (!isYooKassaIP(getClientIP(req))) {
  return res.status(403).json({ error: "Forbidden" });
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô ‚Äî –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å

---

### üü† –í–ê–ñ–ù–´–ï (P1)

#### 3. Rate limiting –Ω–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π

**–§–∞–π–ª:** `utils/rate-limit.ts`

```typescript
// –ü–†–û–ë–õ–ï–ú–ê: –í-memory store –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ Vercel
global.rateLimitStore = new Map<string, RateLimitEntry>();
```

**–†–∏—Å–∫:** –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –æ–±—Ö–æ–¥–∏—Ç—å rate limit –ø–æ–ø–∞–¥–∞—è –Ω–∞ —Ä–∞–∑–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `RateLimitStorage` –∏–∑ `utils/storage.ts` (—É–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ!)

---

#### 4. –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

- –î–æ–±–∞–≤–∏—Ç—å Jest –¥–ª—è unit-—Ç–µ—Å—Ç–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã –¥–ª—è API

```bash
npm install --save-dev jest @types/jest ts-jest
```

---

#### 5. Console.log –≤ production

**–§–∞–π–ª—ã:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ

–ù–∞–π–¥–µ–Ω–æ 6 console.log, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

1. `api/payment/webhook.ts:87` ‚Äî —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
2. `api/payment/webhook.ts:98` ‚Äî ID –ø–ª–∞—Ç–µ–∂–∞
3. `api/payment/webhook.ts:156` ‚Äî email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. `api/bot/webhook.ts:70` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `utils/logger.ts` –≤–º–µ—Å—Ç–æ console.log

---

### üü° –£–õ–£–ß–®–ï–ù–ò–Ø (P2)

#### 6. .env.example —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–π SNI

**–§–∞–π–ª:** `.env.example:61`

```bash
SNI_DOMAIN=yahoo.com  # ‚Üê –£—Å—Ç–∞—Ä–µ–ª–æ!
```

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `www.microsoft.com`

---

#### 7. TODO.md —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–π SNI

**–§–∞–π–ª:** `TODO.md:75-76, 124`

```markdown
- Dest: `yahoo.com:443`
- SNI: `yahoo.com`
```

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ `www.microsoft.com`

---

#### 8. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ buildVlessUri

**–§–∞–π–ª—ã:** `api/go/[token].ts`, `api/sub/[token].ts`

–û–¥–∏–Ω–∞–∫–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `buildVlessUri` –≤ –¥–≤—É—Ö —Ñ–∞–π–ª–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –≤ `utils/vless.ts`

---

#### 9. –ñ—ë—Å—Ç–∫–∏–π URL –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `api/bot/webhook.ts:101`

```typescript
const vpnUrl = `https://botinstasgram.vercel.app?tg_id=${userId}`;
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `getBaseUrl()` –∏–∑ `utils/constants.production.ts`

---

#### 10. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

**–°—Ç–∞—Ç—É—Å:** –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

- –ü–æ–¥–∫–ª—é—á–∏—Ç—å Sentry –¥–ª—è –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å Vercel Analytics
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è

---

## üìã –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
BotiNstsgram/
‚îú‚îÄ‚îÄ api/                          # ‚úÖ Serverless functions
‚îÇ   ‚îú‚îÄ‚îÄ bot/webhook.ts            # Telegram bot handler
‚îÇ   ‚îú‚îÄ‚îÄ config/[token].ts         # JSON config generator
‚îÇ   ‚îú‚îÄ‚îÄ create-user/index.ts      # User creation + trial logic
‚îÇ   ‚îú‚îÄ‚îÄ go/[token].ts             # Smart router (platform detection)
‚îÇ   ‚îú‚îÄ‚îÄ health/index.ts           # Health check endpoint
‚îÇ   ‚îú‚îÄ‚îÄ link/[token].ts           # VLESS URI generator
‚îÇ   ‚îú‚îÄ‚îÄ payment/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create.ts             # YooKassa payment creation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ status.ts             # Payment status check
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ webhook.ts            # YooKassa webhook handler
‚îÇ   ‚îú‚îÄ‚îÄ sub/[token].ts            # Subscription URL (Base64)
‚îÇ   ‚îî‚îÄ‚îÄ users/[uuid]/traffic.ts   # Traffic stats
‚îú‚îÄ‚îÄ public/                       # ‚úÖ Static files
‚îÇ   ‚îú‚îÄ‚îÄ index.html                # Main landing page
‚îÇ   ‚îú‚îÄ‚îÄ success.html              # Post-payment page
‚îÇ   ‚îú‚îÄ‚îÄ offer.html                # Terms of service
‚îÇ   ‚îú‚îÄ‚îÄ privacy.html              # Privacy policy
‚îÇ   ‚îî‚îÄ‚îÄ test.html                 # Test page
‚îú‚îÄ‚îÄ utils/                        # ‚úÖ Shared utilities
‚îÇ   ‚îú‚îÄ‚îÄ constants.ts              # App constants
‚îÇ   ‚îú‚îÄ‚îÄ constants.production.ts   # Production constants
‚îÇ   ‚îú‚îÄ‚îÄ env-validator.ts          # ENV validation
‚îÇ   ‚îú‚îÄ‚îÄ jwt.ts                    # JWT generation/validation
‚îÇ   ‚îú‚îÄ‚îÄ logger.ts                 # Structured logging
‚îÇ   ‚îú‚îÄ‚îÄ panel.ts                  # 3X-UI API client
‚îÇ   ‚îú‚îÄ‚îÄ payment-helpers.ts        # Payment utilities
‚îÇ   ‚îú‚îÄ‚îÄ rate-limit.ts             # Rate limiting
‚îÇ   ‚îú‚îÄ‚îÄ routing.json              # Xray routing config
‚îÇ   ‚îî‚îÄ‚îÄ storage.ts                # KV storage adapter
‚îú‚îÄ‚îÄ scripts/                      # ‚úÖ Helper scripts
‚îÇ   ‚îú‚îÄ‚îÄ check-client-expiry.js
‚îÇ   ‚îú‚îÄ‚îÄ generate-vless-uri.js
‚îÇ   ‚îî‚îÄ‚îÄ setup-telegram-webhook.js
‚îú‚îÄ‚îÄ .env.example                  # ‚úÖ Environment template
‚îú‚îÄ‚îÄ package.json                  # ‚úÖ Dependencies
‚îú‚îÄ‚îÄ tsconfig.json                 # ‚úÖ TypeScript config
‚îú‚îÄ‚îÄ vercel.json                   # ‚úÖ Vercel config
‚îî‚îÄ‚îÄ README.md                     # ‚úÖ Documentation
```

---

## üîí SECURITY CHECKLIST

| –ü—Ä–æ–≤–µ—Ä–∫–∞             | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                        |
| -------------------- | ------ | ---------------------------------- |
| JWT —Å–µ–∫—Ä–µ—Ç—ã –≤ ENV    | ‚úÖ     | –ù–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã                    |
| Rate limiting        | ‚ö†Ô∏è     | –ï—Å—Ç—å, –Ω–æ in-memory                 |
| Input validation     | ‚úÖ     | Telegram ID, email, duration       |
| SQL injection        | ‚úÖ     | N/A (–Ω–µ—Ç SQL)                      |
| XSS                  | ‚úÖ     | –ù–µ—Ç user-generated content         |
| CSRF                 | ‚úÖ     | API stateless, –Ω–µ—Ç —Å–µ—Å—Å–∏–π          |
| Webhook verification | ‚ùå     | –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ IP YooKassa           |
| HTTPS                | ‚úÖ     | Vercel –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç                |
| Secrets in logs      | ‚ö†Ô∏è     | console.log –º–æ–∂–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å email |
| Error disclosure     | ‚úÖ     | –û–±—â–∏–µ –æ—à–∏–±–∫–∏ –±–µ–∑ —Å—Ç–µ–∫—Ç—Ä–µ–π—Å–æ–≤       |

---

## üöÄ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (P0)

1. [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å Vercel KV –¥–ª—è payment storage
2. [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é webhook YooKassa
3. [ ] –û–±–Ω–æ–≤–∏—Ç—å SNI_DOMAIN –≤ Vercel ENV

### –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ (P1)

4. [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å rate-limit –Ω–∞ Vercel KV
5. [ ] –ó–∞–º–µ–Ω–∏—Ç—å console.log –Ω–∞ logger
6. [ ] –û–±–Ω–æ–≤–∏—Ç—å .env.example –∏ TODO.md

### –°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç (P2)

7. [ ] –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã
8. [ ] –í—ã–Ω–µ—Å—Ç–∏ buildVlessUri –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
9. [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å Sentry
10. [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## üìà –ú–ï–¢–†–ò–ö–ò –ö–û–î–ê

| –ú–µ—Ç—Ä–∏–∫–∞             | –ó–Ω–∞—á–µ–Ω–∏–µ |
| ------------------- | -------- |
| TypeScript —Ñ–∞–π–ª—ã    | 19       |
| JavaScript —Ñ–∞–π–ª—ã    | 3        |
| HTML —Ñ–∞–π–ª—ã          | 5        |
| Markdown —Ñ–∞–π–ª—ã      | 15       |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (TS)     | ~2500    |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (prod) | 3        |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (dev)  | 5        |
| API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤      | 11       |

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü—Ä–æ–µ–∫—Ç **VPN Connect** –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–¥.
–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–≤—è–∑–∞–Ω—ã —Å:

1. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö** ‚Äî in-memory storage —Å–ª–∏—à–∫–æ–º –Ω–µ–Ω–∞–¥—ë–∂–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é webhook** ‚Äî –Ω—É–∂–Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º** ‚Äî –ø–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤

–ü–æ—Å–ª–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (P0) –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –∫ production-–Ω–∞–≥—Ä—É–∑–∫–∞–º.

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ P0.
