<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VPN –∑–∞ 1 –º–∏–Ω—É—Ç—É ‚Äî Instagram –∏ YouTube</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px;
        }

        .card {
            max-width: 420px;
            margin: 0 auto;
            background: #fff;
            border-radius: 24px;
            padding: 30px 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
        }

        .header .icon { font-size: 70px; }
        .header h1 { font-size: 26px; color: #1a1a2e; margin: 15px 0 10px; }
        .header p { color: #666; font-size: 16px; line-height: 1.5; }
        .header .badge {
            display: inline-block;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-top: 10px;
        }

        .features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 25px;
        }

        .feature {
            background: #f8fafc;
            border-radius: 12px;
            padding: 14px;
            text-align: center;
        }

        .feature .emoji { font-size: 28px; margin-bottom: 6px; }
        .feature .text { font-size: 13px; color: #64748b; font-weight: 500; }

        .main-btn {
            display: block;
            width: 100%;
            padding: 22px;
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
            text-decoration: none;
            text-align: center;
        }

        .main-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(16, 185, 129, 0.5);
        }

        .main-btn:disabled {
            background: #94a3b8;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .hint {
            text-align: center;
            margin-top: 15px;
            font-size: 13px;
            color: #94a3b8;
        }

        .device-info {
            background: #f1f5f9;
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 14px;
            color: #64748b;
        }

        .device-info strong {
            color: #667eea;
        }

        .error-box {
            background: #fee2e2;
            border: 1px solid #ef4444;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .error-box.show { display: block; }
        .error-box p { color: #dc2626; font-size: 14px; }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }

        .stat {
            text-align: center;
        }

        .stat .number {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
        }

        .stat .label {
            font-size: 12px;
            color: #94a3b8;
        }

        .testimonial {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 16px;
            padding: 20px;
            margin-top: 25px;
        }

        .testimonial .quote {
            font-size: 14px;
            color: #475569;
            font-style: italic;
            line-height: 1.6;
        }

        .testimonial .author {
            margin-top: 10px;
            font-size: 13px;
            color: #94a3b8;
        }

        .footer {
            text-align: center;
            margin-top: 25px;
            font-size: 12px;
            color: #94a3b8;
        }

        .footer a {
            color: #667eea;
            text-decoration: none;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="header">
            <div class="icon">üöÄ</div>
            <h1>VPN –∑–∞ 1 –º–∏–Ω—É—Ç—É</h1>
            <p>Instagram –∏ YouTube —Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç–∞—é—Ç!</p>
            <span class="badge">üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–µ—Å—Ç 24 —á–∞—Å–∞</span>
        </div>

        <div class="features">
            <div class="feature">
                <div class="emoji">üì±</div>
                <div class="text">–õ—é–±–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</div>
            </div>
            <div class="feature">
                <div class="emoji">‚ö°</div>
                <div class="text">–ë—ã—Å—Ç—Ä–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å</div>
            </div>
            <div class="feature">
                <div class="emoji">üîí</div>
                <div class="text">–ë–µ–∑–æ–ø–∞—Å–Ω–æ</div>
            </div>
            <div class="feature">
                <div class="emoji">üá∑üá∫</div>
                <div class="text">–°–±–µ—Ä–±–∞–Ω–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç</div>
            </div>
        </div>

        <div id="device-info" class="device-info">
            –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ...
        </div>

        <button id="main-btn" class="main-btn pulse" onclick="getVPN()">
            üöÄ –ü–û–õ–£–ß–ò–¢–¨ VPN
        </button>

        <div id="error-box" class="error-box">
            <p id="error-text"></p>
        </div>

        <p class="hint">
            –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –¥–ª—è –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        </p>

        <div class="stats">
            <div class="stat">
                <div class="number" id="user-count">2,847</div>
                <div class="label">–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–µ–≥–æ–¥–Ω—è</div>
            </div>
            <div class="stat">
                <div class="number">99%</div>
                <div class="label">—É—Å–ø–µ—à–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π</div>
            </div>
        </div>

        <div class="testimonial">
            <div class="quote">
                "–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ –Ω–∞—à—ë–ª VPN –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç! –ù–∞—Å—Ç—Ä–æ–∏–ª –∑–∞ –º–∏–Ω—É—Ç—É, –ò–Ω—Å—Ç–∞–≥—Ä–∞–º –ª–µ—Ç–∞–µ—Ç, –∞ –°–±–µ—Ä–±–∞–Ω–∫ –Ω–µ –æ—Ç–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è üëç"
            </div>
            <div class="author">‚Äî –ê–ª–µ–∫—Å–µ–π, –ú–æ—Å–∫–≤–∞</div>
        </div>

        <div class="footer">
            <p>–ü—Ä–æ–±–ª–µ–º—ã? <a href="https://t.me/vpn_support" target="_blank">–ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</a></p>
            <p style="margin-top: 8px;">
                <a href="/offer.html">–û—Ñ–µ—Ä—Ç–∞</a> ¬∑ 
                <a href="/privacy.html">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a>
            </p>
        </div>
    </div>

    <script>
        // Detect device
        function detectDevice() {
            const ua = navigator.userAgent;
            if (/iPhone|iPad|iPod/i.test(ua)) return { name: 'iPhone', icon: 'üì±', app: 'FoXray' };
            if (/Android/i.test(ua)) return { name: 'Android', icon: 'ü§ñ', app: 'Hiddify' };
            if (/Windows/i.test(ua)) return { name: 'Windows', icon: 'üíª', app: 'Hiddify' };
            if (/Macintosh|Mac OS/i.test(ua)) return { name: 'macOS', icon: 'üçé', app: 'Hiddify' };
            return { name: '—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ', icon: 'üåê', app: '–∫–ª–∏–µ–Ω—Ç' };
        }

        // Show device info
        const device = detectDevice();
        document.getElementById('device-info').innerHTML = 
            `${device.icon} –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: <strong>${device.name}</strong> ‚Äî –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ${device.app}`;

        // Animate user count
        function animateCount() {
            const el = document.getElementById('user-count');
            const target = 1500 + Math.floor(Math.random() * 1500);
            let current = 0;
            const step = target / 50;
            
            const timer = setInterval(() => {
                current += step;
                if (current >= target) {
                    el.textContent = target.toLocaleString('ru-RU');
                    clearInterval(timer);
                } else {
                    el.textContent = Math.floor(current).toLocaleString('ru-RU');
                }
            }, 30);
        }
        animateCount();

        // Get VPN
        async function getVPN() {
            const btn = document.getElementById('main-btn');
            const errorBox = document.getElementById('error-box');
            const errorText = document.getElementById('error-text');
            
            btn.disabled = true;
            btn.classList.remove('pulse');
            btn.textContent = '‚è≥ –°–æ–∑–¥–∞—ë–º –≤–∞—à VPN...';
            errorBox.classList.remove('show');

            try {
                // Create user
                const res = await fetch('/api/create-user', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        email: `user_${Date.now()}@vpn.local`, 
                        planDuration: 1 
                    })
                });
                
                const data = await res.json();
                
                if (!data.success) {
                    throw new Error(data.error || '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }

                btn.textContent = '‚úÖ VPN —Å–æ–∑–¥–∞–Ω! –ü–µ—Ä–µ—Ö–æ–¥–∏–º...';
                
                // Redirect to smart router
                window.location.href = `/api/go/${data.data.configToken}`;

            } catch (err) {
                console.error('Error:', err);
                errorText.textContent = '‚ùå ' + err.message;
                errorBox.classList.add('show');
                
                btn.disabled = false;
                btn.classList.add('pulse');
                btn.textContent = 'üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â—ë —Ä–∞–∑';
            }
        }
    </script>
</body>
</html>
