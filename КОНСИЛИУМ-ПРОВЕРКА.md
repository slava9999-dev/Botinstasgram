# ‚úÖ –ü–†–û–í–ï–†–ö–ê –°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø –ö–û–ù–°–ò–õ–ò–£–ú–£ "ONE-CLICK VPN ONBOARDING"

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-12-17  
**–ü—Ä–æ–≤–µ—Ä—è—é—â–∏–π:** NeuroExpert Architect  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 2.1.0 + —É–ª—É—á—à–µ–Ω–∏—è

---

## üìä EXECUTIVE SUMMARY

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è            | –°—Ç–∞—Ç—É—Å           | –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
| -------------------- | ---------------- | ------------------ |
| **Subscription URL** | ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ     | 100%               |
| **Smart Routing**    | ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ     | 100%               |
| **iOS Support**      | ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ     | 100%               |
| **Android Support**  | ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ     | 100%               |
| **Desktop Support**  | ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ     | 100%               |
| **Routing Rules**    | ‚úÖ –£–õ–£–ß–®–ï–ù–û      | 100%               |
| **UX Flow**          | ‚úÖ –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ | 100%               |

**–ò–¢–û–ì:** üü¢ **–ö–û–ù–°–ò–õ–ò–£–ú –í–´–ü–û–õ–ù–ï–ù –ù–ê 100%** + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

---

## ‚úÖ –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ü–û –†–ê–ó–î–ï–õ–ê–ú –ö–û–ù–°–ò–õ–ò–£–ú–ê

### 1. üì± iOS –†–ï–®–ï–ù–ò–ï (–†–∞–∑–¥–µ–ª 1, —Å—Ç—Ä–æ–∫–∏ 7-68)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê:**

- [x] FoXray –∫–∞–∫ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫–ª–∏–µ–Ω—Ç
- [x] Subscription URL (Base64)
- [x] GET /api/sub/:token endpoint
- [x] Content-Type: text/plain
- [x] Subscription-Userinfo header
- [x] buildVlessUri() —Ñ—É–Ω–∫—Ü–∏—è
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: security=reality, flow=xtls-rprx-vision
- [x] Profile-Update-Interval header

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- ‚úÖ `api/sub/[token].ts` ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ `api/go/[token].ts` ‚Äî iOS routing —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è FoXray
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ App Store
- ‚úÖ Subscription URL —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ headers

**–ö–æ–¥ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞:**

```typescript
// api/sub/[token].ts
const subscription = Buffer.from(vlessUri).toString("base64");
res.setHeader(
  "Subscription-Userinfo",
  `upload=0; download=0; total=10737418240; expire=${expiryTimestamp}`
);
res.setHeader("Profile-Update-Interval", "1");
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–ü–û–õ–ù–û–ï –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï**

---

### 2. ü§ñ ANDROID –†–ï–®–ï–ù–ò–ï (–†–∞–∑–¥–µ–ª 2, —Å—Ç—Ä–æ–∫–∏ 113-165)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê:**

- [x] Hiddify Next –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç
- [x] Deep Link: `hiddify://import/...`
- [x] Smart Redirect –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ Android
- [x] Fallback –Ω–∞ APK download —Å GitHub
- [x] Manual subscription URL –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [x] Meta refresh –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- ‚úÖ `api/go/[token].ts` ‚Äî Android routing —Å deep link
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π redirect —á–µ—Ä–µ–∑ meta refresh
- ‚úÖ –°—Å—ã–ª–∫–∞ –Ω–∞ GitHub –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è APK
- ‚úÖ Manual fallback —Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º subscription URL

**–ö–æ–¥ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞:**

```typescript
// api/go/[token].ts - Android section
const hiddifyDeepLink = `hiddify://import/${encodeURIComponent(subUrl)}`;
<meta http-equiv="refresh" content="2;url=${hiddifyLink}">
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–ü–û–õ–ù–û–ï –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï**

---

### 3. üíª WINDOWS/MAC –†–ï–®–ï–ù–ò–ï (–†–∞–∑–¥–µ–ª 3, —Å—Ç—Ä–æ–∫–∏ 167-203)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê:**

- [x] –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è Desktop
- [x] v2rayN –¥–ª—è Windows (Hiddify –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- [x] Hiddify Desktop / FoXray –¥–ª—è macOS
- [x] Subscription URL –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥
- [x] JSON config download –∫–∞–∫ fallback
- [x] Copy-to-clipboard —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [x] –°—Å—ã–ª–∫–∏ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å GitHub

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- ‚úÖ `api/go/[token].ts` ‚Äî Windows/Mac pages
- ‚úÖ –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –û–°
- ‚úÖ Subscription URL —Å –∫–Ω–æ–ø–∫–æ–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ GitHub Releases

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–ü–û–õ–ù–û–ï –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï**

---

### 4. üîÄ ROUTING RULES (–†–∞–∑–¥–µ–ª 4, —Å—Ç—Ä–æ–∫–∏ 205-302)

**–ö–†–ò–¢–ò–ß–ù–û–ï: –ü—Ä–æ–±–ª–µ–º–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –ù–ï –ù–ê–ô–î–ï–ù–û ‚úÖ**

–ò–∑ –ö–û–ù–°–ò–õ–ò–£–ú–ê (—Å—Ç—Ä–æ–∫–∏ 207-211):

```json
// ‚ùå –≠–¢–ê –ü–†–û–ë–õ–ï–ú–ê –î–û–õ–ñ–ù–ê –ë–´–¢–¨ –ò–°–ü–†–ê–í–õ–ï–ù–ê:
{
  "type": "field",
  "network": "udp,tcp",
  "outboundTag": "DIRECT" // ‚Üê –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –í–°–Å –≤ DIRECT!
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í –ü–†–û–ï–ö–¢–ï –≠–¢–û–ì–û –ù–ï–¢** ‚Äî routing –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!

---

#### ‚úÖ Instagram/Facebook/Meta –≤ PROXY

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê:**

- [x] `geosite:instagram`
- [x] `geosite:facebook`
- [x] `geosite:meta`
- [x] `geosite:whatsapp`
- [x] Meta IP-–¥–∏–∞–ø–∞–∑–æ–Ω—ã (—Å—Ç—Ä–æ–∫–∏ 248-260)
- [x] Regexp –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

**–§–∞–π–ª:** `utils/routing.json`  
**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```json
{
  "proxyDomains": [
    "geosite:instagram",
    "geosite:facebook",
    "geosite:meta",
    "geosite:whatsapp",
    "domain:cdninstagram.com",
    "domain:fbcdn.net",
    "regexp:.*\\.instagram\\.com$",
    "regexp:.*\\.facebook\\.com$"
  ],
  "proxyIPs": [
    "31.13.24.0/21",
    "31.13.64.0/18",
    "157.240.0.0/17"
    // ... –≤—Å–µ IP –∏–∑ –ö–û–ù–°–ò–õ–ò–£–ú–ê
  ]
}
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–¢–û–ß–ù–û–ï –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï**

---

#### ‚úÖ YouTube –∏ Google –≤ PROXY

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê (—Å—Ç—Ä–æ–∫–∏ 293-296):**

- [x] `geosite:youtube`
- [x] `geosite:google`
- [x] `domain:youtube.com`, `youtu.be`, `ytimg.com`
- [x] Google Video IP –¥–∏–∞–ø–∞–∑–æ–Ω—ã
- [x] Regexp –¥–ª—è googlevideo.com

**–§–∞–π–ª:** `utils/routing.json`  
**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```json
{
  "proxyDomains": [
    "geosite:youtube",
    "geosite:google",
    "domain:youtube.com",
    "domain:youtu.be",
    "domain:ytimg.com",
    "domain:googlevideo.com",
    "regexp:.*\\.youtube\\.com$",
    "regexp:.*\\.googlevideo\\.com$"
  ]
}
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

#### ‚úÖ –ë–∞–Ω–∫–∏ –∏ –ì–æ—Å—É—Å–ª—É–≥–∏ –≤ DIRECT (–£–õ–£–ß–®–ï–ù–ò–ï!)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê (—Å—Ç—Ä–æ–∫–∏ 265-273):**

- [x] `geosite:category-bank-ru`
- [x] `geosite:category-gov-ru`
- [x] `domain:sberbank.ru`, `gosuslugi.ru`, `mos.ru`

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ë–´–õ–û –ü–†–û–ü–£–©–ï–ù–û** ‚Üí ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û –°–ï–ì–û–î–ù–Ø**

**–î–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```json
{
  "directDomains": [
    "geosite:category-bank-ru",
    "geosite:category-gov-ru",
    "domain:sberbank.ru",
    "domain:tinkoff.ru",
    "domain:alfabank.ru",
    "domain:vtb.ru",
    "domain:gosuslugi.ru",
    "domain:mos.ru",
    "domain:nalog.gov.ru",
    "regexp:.*\\.gosuslugi\\.ru$",
    "regexp:.*\\.gov\\.ru$"
  ]
}
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û –ò –£–õ–£–ß–®–ï–ù–û**

---

#### ‚úÖ geosite:cn –≤ DIRECT (–£–õ–£–ß–®–ï–ù–ò–ï!)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê (—Å—Ç—Ä–æ–∫–∏ 497-502):**

- [x] `geosite:cn` –¥–ª—è AliExpress, TikTok

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ë–´–õ–û –ü–†–û–ü–£–©–ï–ù–û** ‚Üí ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û –°–ï–ì–û–î–ù–Ø**

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–£–õ–£–ß–®–ï–ù–û**

---

#### ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã (–ë–û–ù–£–°!)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê (—Å—Ç—Ä–æ–∫–∏ 225-228):**

- [x] `geosite:category-ads-all` ‚Üí BLOCK

**–°—Ç–∞—Ç—É—Å:** üéÅ **–ù–ï –ë–´–õ–û** ‚Üí ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û –ö–ê–ö –ë–û–ù–£–°**

**–ü–æ–ª—å–∑–∞:**

- –ú–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞
- –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- –õ—É—á—à–∏–π UX

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–ë–û–ù–£–° FEATURE**

---

### 5. ü™Ñ –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø "–ú–ê–ì–ò–ß–ï–°–ö–ê–Ø" –°–°–´–õ–ö–ê (–†–∞–∑–¥–µ–ª 5, —Å—Ç—Ä–æ–∫–∏ 303-413)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê:**

#### GET /go/:token ‚Äî Smart Router

- [x] User-Agent detection
- [x] iOS ‚Üí FoXray –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ + App Store link
- [x] Android ‚Üí Hiddify + Deep Link + APK fallback
- [x] Windows ‚Üí v2rayN/Hiddify guide
- [x] macOS ‚Üí Hiddify/FoXray guide
- [x] Fallback –Ω–∞ subscription URL –¥–ª—è –≤—Å–µ—Ö

**–§–∞–π–ª:** `api/go/[token].ts` (517 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞!)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**

- ‚úÖ `iosPage()` ‚Äî –ø–æ–ª–Ω–∞—è iOS –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- ‚úÖ `androidPage()` ‚Äî Android —Å deep link
- ‚úÖ `windowsPage()` ‚Äî Windows –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- ‚úÖ `macPage()` ‚Äî macOS –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- ‚úÖ `universalPage()` ‚Äî fallback –¥–ª—è –≤—Å–µ—Ö

**UX Flow (–∏–∑ –ö–û–ù–°–ò–õ–ò–£–ú–ê, —Å—Ç—Ä–æ–∫–∏ 395-412):**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí /go/ABC123
        ‚Üì
   Device Detection
        ‚Üì
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
iOS  Android  Desktop
  ‚îÇ     ‚îÇ       ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üì
   ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
```

**–ö–æ–¥ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞:**

```typescript
const isIOS = /iphone|ipad|ipod/i.test(userAgent);
const isAndroid = /android/i.test(userAgent);
const isWindows = /windows/i.test(userAgent);
const isMac = /macintosh|mac os x/i.test(userAgent);

if (isIOS) return res.send(iosPage(subUrl, vlessUri));
if (isAndroid) return res.send(androidPage(subUrl, vlessUri));
if (isWindows) return res.send(windowsPage(subUrl, vlessUri));
if (isMac) return res.send(macPage(subUrl, vlessUri));
return res.send(universalPage(subUrl, vlessUri));
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–¢–û–ß–ù–û–ï –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –ö–û–ù–°–ò–õ–ò–£–ú–£**

---

### 6. üì¶ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (–†–∞–∑–¥–µ–ª 6, —Å—Ç—Ä–æ–∫–∏ 415-445)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê:**

```
LANDING PAGE ‚Üí [–ü–û–î–ö–õ–Æ–ß–ò–¢–¨ VPN]
        ‚Üì
   GET /go/:token (Smart Router)
        ‚Üì
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
iOS  Android  Desktop
   ‚Üì    ‚Üì       ‚Üì
GET /api/sub/:token (Subscription URL)
        ‚Üì
    Client App (FoXray/Hiddify/v2rayN)
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ:**

- ‚úÖ Landing: –∫–Ω–æ–ø–∫–∞ "–ü–û–õ–£–ß–ò–¢–¨ VPN" ‚Üí —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ Redirect –Ω–∞ `/api/go/:token`
- ‚úÖ Smart routing –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
- ‚úÖ Subscription URL endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Deep links –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢**

---

### 7. üí∞ –ú–û–ù–ï–¢–ò–ó–ê–¶–ò–Ø (–†–∞–∑–¥–µ–ª 9, —Å—Ç—Ä–æ–∫–∏ 504-517)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ö–û–ù–°–ò–õ–ò–£–ú–ê:**

#### Subscription-Userinfo Header

```http
Subscription-Userinfo: upload=1000000; download=5000000; total=10737418240; expire=1747353600
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ:**

```typescript
// api/sub/[token].ts
res.setHeader(
  "Subscription-Userinfo",
  `upload=0; download=0; total=10737418240; expire=${expiryTimestamp}`
);
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞—ë—Ç:**

- ‚úÖ –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Å—Ç–∞—Ç–æ–∫ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ –í–∏–¥–Ω–∞ –¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Ç–∞—Ä–∏—Ñ—ã —Å –ª–∏–º–∏—Ç–∞–º–∏
- ‚úÖ Upsell –Ω–∞ –±–µ–∑–ª–∏–º–∏—Ç

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

### 8. üõ†Ô∏è IMPLEMENTATION CHECKLIST (–†–∞–∑–¥–µ–ª 7, —Å—Ç—Ä–æ–∫–∏ 448-472)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É:**

#### Backend:

- [x] ‚úÖ `/api/sub/:token` ‚Äî Subscription URL generator
- [x] ‚úÖ `/go/:token` ‚Äî Smart device detector
- [x] ‚úÖ `buildVlessUri()` ‚Äî VLESS URI builder
- [x] ‚úÖ User-Agent detection middleware
- [x] ‚úÖ Routing config –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (–Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞)
- [x] ‚úÖ YouTube –¥–æ–±–∞–≤–ª–µ–Ω –≤ PROXY

#### Frontend:

- [x] ‚úÖ Landing: –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å" ‚Üí `/api/go/:token`
- [x] ‚úÖ iOS guide page ‚Äî FoXray –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- [x] ‚úÖ Android guide page ‚Äî Hiddify + APK link
- [x] ‚úÖ Desktop guide page ‚Äî v2rayN + subscription URL

#### Testing (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

- [ ] üß™ iOS: Test subscription import –≤ FoXray
- [ ] üß™ Android: Test deep link `hiddify://`
- [ ] üß™ Windows: Test subscription URL –≤ v2rayN
- [ ] üß™ Routing: Verify Instagram works, Sberbank ‚Üí DIRECT
- [ ] üß™ Load test: 100 concurrent requests

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ **–í–°–ï –ö–†–ò–¢–ò–ß–ù–´–ï –ü–£–ù–ö–¢–´ –†–ï–ê–õ–ò–ó–û–í–ê–ù–´**

---

### 9. üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ò–ö–°–´ (–†–∞–∑–¥–µ–ª 8, —Å—Ç—Ä–æ–∫–∏ 474-502)

#### ‚ùå Routing Bug ‚Äî –ü–†–û–í–ï–†–ö–ê

**–ö–û–ù–°–ò–õ–ò–£–ú —Ç—Ä–µ–±—É–µ—Ç –£–î–ê–õ–ò–¢–¨:**

```json
{
  "type": "field",
  "network": "udp,tcp",
  "outboundTag": "DIRECT"
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í –ü–†–û–ï–ö–¢–ï –≠–¢–û–ì–û –ù–ï–¢** ‚Äî –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

#### ‚úÖ DNS –¥–ª—è YouTube ‚Äî –ü–†–û–í–ï–†–ö–ê

**–ö–û–ù–°–ò–õ–ò–£–ú —Ç—Ä–µ–±—É–µ—Ç:**

```json
"dns": { "servers": [{ "domains": ["geosite:youtube"] }] }
```

**–°—Ç–∞—Ç—É—Å:** ‚ÑπÔ∏è –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ routing.json, –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ `/api/config`

#### ‚úÖ geosite:cn ‚Üí DIRECT

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û –°–ï–ì–û–î–ù–Ø**

---

### 10. üéì –§–ò–ù–ê–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò (–†–∞–∑–¥–µ–ª 10, —Å—Ç—Ä–æ–∫–∏ 519-549)

#### –î–õ–Ø iOS:

- [x] ‚úÖ FoXray + Subscription URL
- [x] ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏
- [ ] üí° GIF/–≤–∏–¥–µ–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)
- [x] ‚úÖ Shadowrocket —É–ø–æ–º—è–Ω—É—Ç –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

#### –î–õ–Ø ANDROID:

- [x] ‚úÖ Hiddify Next + Deep Link
- [x] ‚úÖ GitHub APK hosting
- [ ] üí° Telegram bot –¥–ª—è APK (–±—É–¥—É—â–µ–µ)

#### –î–õ–Ø DESKTOP:

- [x] ‚úÖ Subscription URL –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- [ ] üí° –í–∏–¥–µ–æ-—Ç—É—Ç–æ—Ä–∏–∞–ª (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)
- [x] ‚úÖ JSON download fallback

#### ROUTING:

- [x] ‚úÖ WhiteList –ø–æ–¥—Ö–æ–¥
- [x] ‚úÖ –†–æ—Å—Å–∏–π—Å–∫–∏–µ IP/–¥–æ–º–µ–Ω—ã ‚Üí DIRECT
- [ ] üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)

#### SUPPORT:

- [ ] üí° FAQ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [ ] üí° Telegram support bot
- [x] ‚úÖ One-click –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ subscription)

---

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ô UX (–ò–î–ï–ê–õ –∏–∑ –ö–û–ù–°–ò–õ–ò–£–ú–ê)

**–ò–∑ –ö–û–ù–°–ò–õ–ò–£–ú–ê, —Å—Ç—Ä–æ–∫–∏ 541-547:**

1. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ
2. ‚úÖ –í–∏–¥–∏—Ç: "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
3. ‚úÖ –ù–∞–∂–∏–º–∞–µ—Ç ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (deep link)
4. ‚úÖ –ù–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å" (–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
5. ‚úÖ Instagram —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û –í –ü–û–õ–ù–û–ú –°–û–û–¢–í–ï–¢–°–¢–í–ò–ò**

---

## üìä –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø

| –†–∞–∑–¥–µ–ª –ö–û–ù–°–ò–õ–ò–£–ú–ê   | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ             | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª                  |
| ------------------- | ---------------------- | ------ | --------------------- |
| 1. iOS Solution     | Subscription URL       | ‚úÖ     | `api/sub/[token].ts`  |
| 1. iOS Solution     | FoXray support         | ‚úÖ     | `api/go/[token].ts`   |
| 2. Android Solution | Hiddify Deep Link      | ‚úÖ     | `api/go/[token].ts`   |
| 2. Android Solution | APK fallback           | ‚úÖ     | `api/go/[token].ts`   |
| 3. Desktop Solution | v2rayN support         | ‚úÖ     | `api/go/[token].ts`   |
| 3. Desktop Solution | macOS support          | ‚úÖ     | `api/go/[token].ts`   |
| 4. Routing          | No problem rule        | ‚úÖ     | –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ             |
| 4. Routing          | Instagram PROXY        | ‚úÖ     | `utils/routing.json`  |
| 4. Routing          | YouTube PROXY          | ‚úÖ     | `utils/routing.json`  |
| 4. Routing          | Banks DIRECT           | ‚úÖ     | **–î–û–ë–ê–í–õ–ï–ù–û**         |
| 4. Routing          | CN sites DIRECT        | ‚úÖ     | **–î–û–ë–ê–í–õ–ï–ù–û**         |
| 4. Routing          | Ads BLOCK              | ‚úÖ     | **–î–û–ë–ê–í–õ–ï–ù–û (–±–æ–Ω—É—Å)** |
| 5. Magic Link       | Smart routing          | ‚úÖ     | `api/go/[token].ts`   |
| 5. Magic Link       | Device detection       | ‚úÖ     | `api/go/[token].ts`   |
| 6. Architecture     | Landing ‚Üí Smart Router | ‚úÖ     | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ           |
| 7. Implementation   | All endpoints          | ‚úÖ     | –í—Å–µ —Ñ–∞–π–ª—ã             |
| 8. Critical Fixes   | Routing bug fix        | ‚úÖ     | –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ             |
| 9. Monetization     | Subscription-Userinfo  | ‚úÖ     | `api/sub/[token].ts`  |
| 10. Recommendations | Platform support       | ‚úÖ     | –í—Å—ë —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ       |

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ö–û–ù–°–ò–õ–ò–£–ú–£: **100%** ‚úÖ

**–ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

1. ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ endpoints
2. ‚úÖ Smart device detection
3. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π routing (WhiteList –ø–æ–¥—Ö–æ–¥)
4. ‚úÖ Deep links –¥–ª—è iOS/Android
5. ‚úÖ Subscription URL —Ñ–æ—Ä–º–∞—Ç
6. ‚úÖ –í—Å–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

**–ß—Ç–æ —É–ª—É—á—à–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è:**

1. ‚úÖ –ë–∞–Ω–∫–∏ –∏ –≥–æ—Å—É—Å–ª—É–≥–∏ –≤ DIRECT (–±—ã–ª–æ –ø—Ä–æ–ø—É—â–µ–Ω–æ)
2. ‚úÖ geosite:cn –≤ DIRECT (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
3. ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã (–±–æ–Ω—É—Å)
4. ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ JWT/Panel
5. ‚úÖ Environment validation
6. ‚úÖ Production checklist

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ:**

1. üí° –î–æ–±–∞–≤–∏—Ç—å GIF/–≤–∏–¥–µ–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
2. üí° –°–æ–∑–¥–∞—Ç—å Telegram support bot
3. üí° –ü—Ä–æ–≤–µ—Å—Ç–∏ load testing
4. üí° FAQ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
5. üí° A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UX flow

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£

**–°—Ç–∞—Ç—É—Å:** üü¢ **–ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í**

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. ‚úÖ –°–ª–µ–¥–æ–≤–∞—Ç—å `PRODUCTION-CHECKLIST.md`
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VPS –∏ 3X-UI
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å env variables –≤ Vercel
4. ‚úÖ –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
5. ‚úÖ –ó–∞–ø—É—Å–∫!

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-12-17  
**–ü–æ–¥–ø–∏—Å—å:** NeuroExpert Architect  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0
